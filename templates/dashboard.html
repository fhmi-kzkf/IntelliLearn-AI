{% extends 'base.html' %}

{% block title %}Dashboard - IntelliLearn AI{% endblock %}

{% block content %}
<div class="min-h-screen bg-intellilearn-black py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Dashboard Header -->
        <div class="mb-6 sm:mb-8">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                <div class="mb-4 lg:mb-0">
                    <h1 class="text-2xl sm:text-3xl font-bold text-intellilearn-white">
                        Welcome back, {{ user.first_name|default:user.username }}!
                    </h1>
                    <p class="text-gray-400 mt-2 text-sm sm:text-base">
                        Ready to continue your AI learning journey?
                    </p>
                </div>
                <div class="flex flex-wrap items-center gap-2 sm:gap-4">
                    <!-- Learning Level Badge -->
                    <span class="inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium {% if user.learning_level == 'beginner' %}bg-green-900 text-green-300{% elif user.learning_level == 'intermediate' %}bg-yellow-900 text-yellow-300{% else %}bg-red-900 text-red-300{% endif %}">
                        <i class="fas fa-star mr-1"></i>
                        {{ user.get_learning_level_display }}
                    </span>
                    <!-- Current Streak -->
                    <span class="inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-intellilearn-red text-white">
                        <i class="fas fa-fire mr-1"></i>
                        {{ user.current_streak }} day streak
                    </span>
                </div>
            </div>
        </div>
        
        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Total Points -->
            <div class="bg-intellilearn-gray-medium rounded-lg p-6 border border-intellilearn-gray-dark">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-coins text-white text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-gray-400 text-sm">Total Points</p>
                        <p class="text-2xl font-bold text-intellilearn-white">{{ user.total_points }}</p>
                    </div>
                </div>
            </div>
            
            <!-- Courses Enrolled -->
            <div class="bg-intellilearn-gray-medium rounded-lg p-6 border border-intellilearn-gray-dark">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-book text-white text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-gray-400 text-sm">Courses</p>
                        <p class="text-2xl font-bold text-intellilearn-white">{{ enrolled_courses_count }}</p>
                    </div>
                </div>
            </div>
            
            <!-- Quizzes Completed -->
            <div class="bg-intellilearn-gray-medium rounded-lg p-6 border border-intellilearn-gray-dark">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-check-circle text-white text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-gray-400 text-sm">Quizzes Completed</p>
                        <p class="text-2xl font-bold text-intellilearn-white">{{ completed_quizzes_count }}</p>
                    </div>
                </div>
            </div>
            
            <!-- Badges Earned -->
            <div class="bg-intellilearn-gray-medium rounded-lg p-6 border border-intellilearn-gray-dark">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-trophy text-white text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-gray-400 text-sm">Badges Earned</p>
                        <p class="text-2xl font-bold text-intellilearn-white">{{ earned_badges_count }}</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Learning Analytics -->  
        <div class="bg-intellilearn-gray-medium rounded-lg p-4 sm:p-6 border border-intellilearn-gray-dark mb-6 sm:mb-8">
            <h2 class="text-lg sm:text-xl font-bold text-intellilearn-white mb-4 sm:mb-6">Learning Analytics</h2>
            
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 sm:gap-8">
                <!-- Weekly Progress Chart -->
                <div>
                    <h3 class="text-base sm:text-lg font-semibold text-intellilearn-white mb-3 sm:mb-4">This Week's Activity</h3>
                    <div class="space-y-2 sm:space-y-3">
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400 text-sm">Monday</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-20 bg-intellilearn-gray-dark rounded-full h-2">
                                    <div class="bg-intellilearn-red h-2 rounded-full" style="width: 80%"></div>
                                </div>
                                <span class="text-xs text-gray-400">45 min</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400 text-sm">Tuesday</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-20 bg-intellilearn-gray-dark rounded-full h-2">
                                    <div class="bg-intellilearn-red h-2 rounded-full" style="width: 60%"></div>
                                </div>
                                <span class="text-xs text-gray-400">30 min</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400 text-sm">Wednesday</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-20 bg-intellilearn-gray-dark rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                </div>
                                <span class="text-xs text-green-400">60 min</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400 text-sm">Thursday</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-20 bg-intellilearn-gray-dark rounded-full h-2">
                                    <div class="bg-intellilearn-red h-2 rounded-full" style="width: 40%"></div>
                                </div>
                                <span class="text-xs text-gray-400">20 min</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400 text-sm">Friday</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-20 bg-intellilearn-gray-dark rounded-full h-2">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 90%"></div>
                                </div>
                                <span class="text-xs text-yellow-400">55 min</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400 text-sm">Saturday</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-20 bg-intellilearn-gray-dark rounded-full h-2">
                                    <div class="bg-intellilearn-red h-2 rounded-full" style="width: 70%"></div>
                                </div>
                                <span class="text-xs text-gray-400">35 min</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400 text-sm">Sunday</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-20 bg-intellilearn-gray-dark rounded-full h-2">
                                    <div class="bg-gray-600 h-2 rounded-full" style="width: 0%"></div>
                                </div>
                                <span class="text-xs text-gray-600">0 min</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Weekly Summary -->
                    <div class="mt-6 p-4 bg-intellilearn-gray-dark rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-gray-400 text-sm">Weekly Goal Progress</span>
                            <span class="text-intellilearn-white font-semibold">245/300 min</span>
                        </div>
                        <div class="w-full bg-intellilearn-gray-medium rounded-full h-3">
                            <div class="bg-gradient-to-r from-intellilearn-red to-red-400 h-3 rounded-full" style="width: 82%"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">You're 55 minutes away from your weekly goal!</p>
                    </div>
                </div>
                
                <!-- Learning Goals & Achievements -->
                <div>
                    <h3 class="text-base sm:text-lg font-semibold text-intellilearn-white mb-3 sm:mb-4">Monthly Goals</h3>
                    
                    <div class="space-y-4">
                        <div class="p-4 bg-intellilearn-gray-dark rounded-lg">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="text-intellilearn-white font-medium">Complete 3 Courses</h4>
                                <span class="text-sm text-gray-400">2/3</span>
                            </div>
                            <div class="w-full bg-intellilearn-gray-medium rounded-full h-2 mb-2">
                                <div class="bg-blue-500 h-2 rounded-full" style="width: 67%"></div>
                            </div>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-gray-400">1 course remaining</span>
                                <span class="text-blue-400">67% complete</span>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-intellilearn-gray-dark rounded-lg">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="text-intellilearn-white font-medium">Earn 1000 Points</h4>
                                <span class="text-sm text-gray-400">{{ user.total_points|default:"750" }}/1000</span>
                            </div>
                            <div class="w-full bg-intellilearn-gray-medium rounded-full h-2 mb-2">
                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 75%"></div>
                            </div>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-gray-400">250 points to go</span>
                                <span class="text-yellow-400">75% complete</span>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-green-900/30 border border-green-700 rounded-lg">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="text-green-300 font-medium flex items-center">
                                    <i class="fas fa-check-circle mr-2"></i>
                                    Maintain 7-Day Streak
                                </h4>
                                <span class="text-sm text-green-300">7/7</span>
                            </div>
                            <div class="w-full bg-green-800 rounded-full h-2 mb-2">
                                <div class="bg-green-400 h-2 rounded-full" style="width: 100%"></div>
                            </div>
                            <div class="text-xs text-green-300">
                                <i class="fas fa-trophy mr-1"></i>Goal completed! +100 bonus points
                            </div>
                        </div>
                    </div>
                    
                    <!-- AI Recommendations -->
                    <div class="mt-6 p-4 bg-gradient-to-r from-purple-900/30 to-blue-900/30 border border-purple-700 rounded-lg">
                        <h4 class="text-purple-300 font-medium mb-3 flex items-center">
                            <i class="fas fa-lightbulb mr-2"></i>
                            AI Recommendations
                        </h4>
                        <ul class="space-y-2 text-sm text-gray-300">
                            <li class="flex items-start space-x-2">
                                <i class="fas fa-chevron-right text-purple-400 mt-1 text-xs"></i>
                                <span>Focus on Deep Learning to advance to Intermediate level</span>
                            </li>
                            <li class="flex items-start space-x-2">
                                <i class="fas fa-chevron-right text-purple-400 mt-1 text-xs"></i>
                                <span>Take more quizzes to reinforce your learning</span>
                            </li>
                            <li class="flex items-start space-x-2">
                                <i class="fas fa-chevron-right text-purple-400 mt-1 text-xs"></i>
                                <span>Your best learning time is in the morning</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Dashboard Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Continue Learning -->
            <div class="lg:col-span-2">
                <div class="bg-intellilearn-gray-medium rounded-lg p-6 border border-intellilearn-gray-dark mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold text-intellilearn-white">Continue Learning</h2>
                        <a href="{% url 'courses:my_courses' %}" class="text-intellilearn-red hover:text-red-400 text-sm font-medium">
                            View All
                        </a>
                    </div>
                    
                    <!-- Active Courses -->
                    <div class="space-y-4">
                        <!-- Sample Active Course for Demo -->
                        <div class="bg-intellilearn-gray-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-intellilearn-red rounded-lg flex items-center justify-center">
                                        <i class="fas fa-robot text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-intellilearn-white font-medium">Introduction to Machine Learning</h3>
                                        <p class="text-gray-400 text-sm">65% complete • 3 lessons remaining</p>
                                        <div class="flex items-center space-x-2 mt-1">
                                            <span class="text-xs bg-green-900 text-green-300 px-2 py-1 rounded-full">Beginner</span>
                                            <span class="text-xs text-gray-500">Last studied 2 days ago</span>
                                        </div>
                                    </div>
                                </div>
                                <a href="{% url 'courses:list' %}" 
                                   class="bg-intellilearn-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                                    Continue
                                </a>
                            </div>
                            <div class="mt-3">
                                <div class="w-full bg-intellilearn-gray-medium rounded-full h-3 relative">
                                    <div class="bg-gradient-to-r from-intellilearn-red to-red-400 h-3 rounded-full transition-all duration-500" style="width: 65%"></div>
                                    <div class="absolute right-2 top-0 text-xs text-gray-400 mt-4">65%</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sample Course 2 -->
                        <div class="bg-intellilearn-gray-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-brain text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-intellilearn-white font-medium">Deep Learning Fundamentals</h3>
                                        <p class="text-gray-400 text-sm">20% complete • 8 lessons remaining</p>
                                        <div class="flex items-center space-x-2 mt-1">
                                            <span class="text-xs bg-yellow-900 text-yellow-300 px-2 py-1 rounded-full">Intermediate</span>
                                            <span class="text-xs text-gray-500">Last studied 1 week ago</span>
                                        </div>
                                    </div>
                                </div>
                                <a href="{% url 'courses:list' %}" 
                                   class="bg-intellilearn-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                                    Continue
                                </a>
                            </div>
                            <div class="mt-3">
                                <div class="w-full bg-intellilearn-gray-medium rounded-full h-3 relative">
                                    <div class="bg-gradient-to-r from-blue-500 to-blue-400 h-3 rounded-full transition-all duration-500" style="width: 20%"></div>
                                    <div class="absolute right-2 top-0 text-xs text-gray-400 mt-4">20%</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Browse More Courses -->
                        <div class="text-center py-4 border-t border-intellilearn-gray-dark">
                            <a href="{% url 'courses:list' %}" 
                               class="text-intellilearn-red hover:text-red-400 text-sm font-medium">
                                <i class="fas fa-plus mr-1"></i>Browse More Courses
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Quiz Results -->
                <div class="bg-intellilearn-gray-medium rounded-lg p-6 border border-intellilearn-gray-dark">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold text-intellilearn-white">Recent Quiz Results</h2>
                        <a href="{% url 'quizzes:my_attempts' %}" class="text-intellilearn-red hover:text-red-400 text-sm font-medium">
                            View All
                        </a>
                    </div>
                    
                    <div class="space-y-4">
                        <!-- Recent Quiz Result 1 -->
                        <div class="bg-intellilearn-gray-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-check text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-intellilearn-white font-medium">AI Basics Quiz</h3>
                                        <p class="text-gray-400 text-sm">Completed 2 days ago</p>
                                        <div class="flex items-center space-x-2 mt-1">
                                            <span class="text-sm font-bold text-green-400">92%</span>
                                            <span class="text-xs text-gray-500">8/10 correct</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-green-400 font-medium">+50 Points</div>
                                    <div class="text-xs text-gray-500">Personal Best!</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recent Quiz Result 2 -->
                        <div class="bg-intellilearn-gray-dark rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-clock text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-intellilearn-white font-medium">Neural Networks Quick Test</h3>
                                        <p class="text-gray-400 text-sm">Completed 5 days ago</p>
                                        <div class="flex items-center space-x-2 mt-1">
                                            <span class="text-sm font-bold text-yellow-400">78%</span>
                                            <span class="text-xs text-gray-500">7/9 correct</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm text-yellow-400 font-medium">+35 Points</div>
                                    <div class="text-xs text-gray-500">Good job!</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Take More Quizzes -->
                        <div class="text-center py-4 border-t border-intellilearn-gray-dark">
                            <a href="{% url 'quizzes:list' %}" 
                               class="text-intellilearn-red hover:text-red-400 text-sm font-medium">
                                <i class="fas fa-play mr-1"></i>Take More Quizzes
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- AI Tutor Quick Access -->
                <div class="bg-gradient-to-br from-intellilearn-red/20 to-purple-600/20 rounded-lg p-6 border border-intellilearn-red/20">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-intellilearn-red rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-robot text-white text-2xl"></i>
                        </div>
                        <h3 class="text-intellilearn-white font-bold mb-2">Need Help?</h3>
                        <p class="text-gray-300 text-sm mb-4">
                            Chat with our AI tutor for instant help with any AI concept.
                        </p>
                        <a href="{% url 'ai_tutor:chat' %}" 
                           class="bg-intellilearn-red text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors w-full block text-center">
                            <i class="fas fa-comments mr-2"></i>Start Chat
                        </a>
                    </div>
                </div>
                
                <!-- Recent Badges -->
                <div class="bg-intellilearn-gray-medium rounded-lg p-6 border border-intellilearn-gray-dark">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-intellilearn-white">Recent Badges</h3>
                        <a href="{% url 'gamification:my_badges' %}" class="text-intellilearn-red hover:text-red-400 text-sm">
                            View All
                        </a>
                    </div>
                    
                    <div class="space-y-3">
                        <!-- Recent Badge 1 -->
                        <div class="flex items-center space-x-3 p-3 bg-intellilearn-gray-dark rounded-lg">
                            <div class="w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-graduation-cap text-white text-sm"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="text-intellilearn-white text-sm font-medium">First Steps</h4>
                                <p class="text-gray-400 text-xs">Earned 3 days ago</p>
                            </div>
                        </div>
                        
                        <!-- Recent Badge 2 -->
                        <div class="flex items-center space-x-3 p-3 bg-intellilearn-gray-dark rounded-lg">
                            <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-brain text-white text-sm"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="text-intellilearn-white text-sm font-medium">Quiz Master</h4>
                                <p class="text-gray-400 text-xs">Earned 1 week ago</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="bg-intellilearn-gray-medium rounded-lg p-6 border border-intellilearn-gray-dark">
                    <h3 class="text-lg font-bold text-intellilearn-white mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <a href="{% url 'courses:list' %}" 
                           class="flex items-center space-x-3 p-3 rounded-lg bg-intellilearn-gray-dark hover:bg-intellilearn-gray-dark/70 transition-colors">
                            <i class="fas fa-search text-intellilearn-red"></i>
                            <span class="text-intellilearn-white">Browse Courses</span>
                        </a>
                        <a href="{% url 'quizzes:list' %}" 
                           class="flex items-center space-x-3 p-3 rounded-lg bg-intellilearn-gray-dark hover:bg-intellilearn-gray-dark/70 transition-colors">
                            <i class="fas fa-question-circle text-intellilearn-red"></i>
                            <span class="text-intellilearn-white">Take a Quiz</span>
                        </a>
                        <a href="{% url 'gamification:leaderboard' %}" 
                           class="flex items-center space-x-3 p-3 rounded-lg bg-intellilearn-gray-dark hover:bg-intellilearn-gray-dark/70 transition-colors">
                            <i class="fas fa-crown text-intellilearn-red"></i>
                            <span class="text-intellilearn-white">Leaderboard</span>
                        </a>
                        <a href="{% url 'accounts:profile' %}" 
                           class="flex items-center space-x-3 p-3 rounded-lg bg-intellilearn-gray-dark hover:bg-intellilearn-gray-dark/70 transition-colors">
                            <i class="fas fa-user text-intellilearn-red"></i>
                            <span class="text-intellilearn-white">My Profile</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}